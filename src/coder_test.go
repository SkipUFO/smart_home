package main

import (
	"fmt"
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestEncode(t *testing.T) {

	assert.Equal(t,
		"562051010400565754070409535050720003565654010504575751010072535251010400575655770408572751010170565654010504575751700001535055760400572655060003522351017601582127037001255221707601232027037004255221067601235051037601585651767601582151010575",
		encode(encryptKey, `{"auth":"true", "admin":true, "name":"Мамлеев Д.М"}`))

	assert.Equal(t,
		"562051010400565754070409535050720003565654010504575751010575",
		encode(encryptKey, `{"auth":"true"}`))

	assert.Equal(t, "", encode(encryptKey, `{"getalldevices":"true"}`))
}

func TestDecode(t *testing.T) {
	assert.Equal(t,
		`{"auth":"true", "admin":true, "name":"Мамлеев Д.М"}`,
		decode(encryptKey, "562051010400565754070409535050720003565654010504575751010072535251010400575655770408572751010170565654010504575751700001535055760400572655060003522351017601582127037001255221707601232027037004255221067601235051037601585651767601582151010575"))

	assert.Equal(t,
		`{"auth":"true"}`,
		decode(encryptKey, "562051010400565754070409535050720003565654010504575751010575"))
}

func TestDecode2(t *testing.T) {
	fmt.Println(decode(encryptKey, "5620510104725724550404085727510101705350500201005350517000035652550205025651540404775650550700035223510101005253510100725350550a04055350507201085321510104085756570504725724557505035350507201005321510104085756560104775724557700035223500200725350550a04055521550a04745757510101705251517000035721550a04745757510101705254500300725350550a04745756550605095521550a0474575751010170525051700003575b550707025656550205055657540000035223500200725350550004095753557604065757570704085726557704085727550400035223500300725350550704085726557704085727550400035223500300725350550704085726557704085727550407075753557005045757510101705252517000035751557504725724540106055650550205065350507200035252540b0407575450030100525250030101525251010072535055000477572155750503555654010400565557750407575451010170535050030509575455050101525250030101525250030003532151010502575754070701575354000502565555750503575651010170535051010072535055000477572155750503545655060509565651010170535051010575"))
}
